================================================================================
SVN $Id: ChangeLog 66183 2015-03-09 00:00:15Z aliceb@ucar.edu $
SVN $URL: https://svn-ccsm-models.cgd.ucar.edu//tools/proc_ocn/pop_diag/branches/popdiag_cesm_postprocessing $
================================================================================
This file describes what tags were created and why
================================================================================

Tag_name: tools/proc_ocn/pop_diag/branch_tags/popdiag_cesm_postprocessing_20160908
Originator(s): aliceb
Date: 08 September 2016
One-line Summary: created final branch tag in SVN before migrating to github

================================================================================

Tag_name: /tools/proc_ocn/pop_diag/branches/popdiag_cesm_postprocessing/
Originator(s): aliceb
Date: 08 July 2016
One-line Summary: added polar projection T&S plots for model vs. control


A       ncl_lib/saltz_arctic_diff.ncl
A       ncl_lib/tempz_arctic_diff.ncl
A       ncl_lib/saltz_antarctic_diff.ncl
A       ncl_lib/tempz_antarctic_diff.ncl

================================================================================

Tag_name: /tools/proc_ocn/pop_diag/branches/popdiag_cesm_postprocessing/
Originator(s): aliceb
Date: 09 June 2016
One-line Summary: minor mods to get label formatting (more) correct on plots.

M       ncl_lib/yz_plot.ncl

================================================================================

Tag_name: /tools/proc_ocn/pop_diag/branches/popdiag_cesm_postprocessing/
Originator(s): aliceb
Date: 21 April 2016
One-line Summary: update for .asc fileexists test rather than ispresent which
always returns false for ascii files. Add debug print to compute_rho.ncl - commented
out for now.

M       pop_log_diagts_transports.ncl
M       compute_rho.ncl

================================================================================

Tag_name: /tools/proc_ocn/pop_diag/branches/popdiag_cesm_postprocessing/
Originator(s): aliceb
Date: 09 December 2015
One-line Summary: update per John Truesdale's recommendations on formats

M       ncl_lib/enso_wavelet_asc.ncl

================================================================================

Tag_name: /tools/proc_ocn/pop_diag/branches/popdiag_cesm_postprocessing/
Originator(s): aliceb
Date: 09 November 2015
One-line Summary: added IMAGEFORMAT env var option support to all NCL scripts


M       ncl_lib/sfcflx_za_diff.ncl
M       ncl_lib/pop_log_diagts_precf.ncl
M       ncl_lib/mld.ncl
M       ncl_lib/S_eq_diff.ncl
M       ncl_lib/sfcflx_za.ncl
M       ncl_lib/T_eq_diff.ncl
M       ncl_lib/kappa_isopz.ncl
M       ncl_lib/U_eq_diff.ncl
M       ncl_lib/S_eq_meridional_diff.ncl
M       ncl_lib/regionalSbias500m.ncl
M       ncl_lib/sst_eq_pac_seasonal_cycle.ncl
M       ncl_lib/sfcflx.ncl
M       ncl_lib/regionalTbias500m.ncl
M       ncl_lib/S_eq.ncl
A       ncl_lib/change_img_format.sh
M       ncl_lib/pop_log_diagts_transports.ncl
M       ncl_lib/field_2d_za_diff.ncl
M       ncl_lib/pop_log_diagts_3d_ecosys.monthly_old.ncl
M       ncl_lib/saltz.ncl
M       ncl_lib/pop_log_diagts_3d_ecosys.monthly.ncl
M       ncl_lib/vvelz_diff.ncl
M       ncl_lib/moc_netcdf.ncl
M       ncl_lib/mld_diff.ncl
M       ncl_lib/field_2d.ncl
M       ncl_lib/kappa_isopz_diff.ncl
M       ncl_lib/vecvelz.ncl
M       ncl_lib/pop_log_diagts_fwflux.monthly.ncl
M       ncl_lib/TS_profiles_diff_plot.ncl
M       ncl_lib/dwbc.ncl
M       ncl_lib/enso_wavelet_asc.ncl
M       ncl_lib/visopz_diff.ncl
M       ncl_lib/PD_eq_meridional_diff.ncl
M       ncl_lib/TS_basinavg_arctic.ncl
M       ncl_lib/saltz_antarctic.ncl
M       ncl_lib/uisopz.ncl
M       ncl_lib/pop_log_diagts_hflux.monthly.ncl
M       ncl_lib/S_eq_meridional.ncl
M       ncl_lib/PD_eq_meridional.ncl
M       ncl_lib/field_3d_za_diff.ncl
M       ncl_lib/U_eq_meridional.ncl
M       ncl_lib/kappa_thicz.ncl
M       ncl_lib/cpl7b_log_timeseries_fw.ncl
M       ncl_lib/wvelz_diff.ncl
M       ncl_lib/cpl6_log_timeseries_heat.ncl
M       ncl_lib/field_2d_diff.ncl
M       ncl_lib/regionalSbias2000m.ncl
M       ncl_lib/field_2d_za.ncl
M       ncl_lib/field_3d_za.ncl
M       ncl_lib/uvelz.ncl
M       ncl_lib/moc_annual_timeseries.ncl
M       ncl_lib/vvelz.ncl
M       ncl_lib/wvelz.ncl
M       ncl_lib/sst_eq_pac_seasonal_cycle_diff.ncl
M       ncl_lib/sfcflx_diff.ncl
M       ncl_lib/saltz_arctic.ncl
M       ncl_lib/tempz_arctic.ncl
M       ncl_lib/U_eq_meridional_diff.ncl
M       ncl_lib/saltz_diff.ncl
M       ncl_lib/tempz_diff.ncl
M       ncl_lib/iagez_diff.ncl
M       ncl_lib/U_eq.ncl
M       ncl_lib/moc_netcdf_diff.ncl
M       ncl_lib/visopz.ncl
M       ncl_lib/cpl6_log_timeseries_fw.ncl
M       ncl_lib/enso_wavelet.ncl
M       ncl_lib/pop_log_diagts_cfc.monthly.ncl
M       ncl_lib/iagez.ncl
M       ncl_lib/tempz.ncl
M       ncl_lib/cpl7b_log_timeseries_heat.ncl
M       ncl_lib/regionalTbias2000m.ncl
M       ncl_lib/pop_log_diagts_nino.monthly.ncl
M       ncl_lib/pop_log_diagts_3d.monthly.ncl
M       ncl_lib/moc_monthly_timeseries.ncl
M       ncl_lib/uisopz_diff.ncl
M       ncl_lib/wisopz_diff.ncl
M       ncl_lib/T_eq_meridional_diff.ncl
M       ncl_lib/kappa_thicz_diff.ncl
M       ncl_lib/tempz_antarctic.ncl
M       ncl_lib/T_eq.ncl
M       ncl_lib/wisopz.ncl
M       ncl_lib/T_eq_meridional.ncl
M       ncl_lib/uvelz_diff.ncl
M       ncl_lib/ssh.ncl
M       tool_lib/process_cpl7b_logfiles_fw.awk
M       tool_lib/process_cpl7b_logfiles_heat.awk

================================================================================

Tag_name: /tools/proc_ocn/pop_diag/branches/popdiag_cesm_postprocessing/
Originator(s): aliceb
Date: 11 September 2015
One-line Summary: minor updates to scripts to get them working in the python
env with newer data sets (cesm1_5_z generated)

M       ncl_lib/pop_log_diagts_transports.ncl
M       tool_lib/process_cpl7b_logfiles_fw.awk
M       tool_lib/process_cpl7b_logfiles_heat.awk
M       eco_lib/clim_maps_at_depths.py
M       eco_lib/maps_at_depths_diff.py
M       eco_lib/model_obs_maps_at_depths.py

================================================================================

Tag_name: /tools/proc_ocn/pop_diag/branches/popdiag_cesm_postprocessing/
Originator(s): aliceb
Date: 11 September 2015
One-line Summary: updates to eco_sys to allow for changed variable names
from cesm1.1 to cesm1.2 and going forward. Also, modified clim_maps_surface_2D.py
to convert it into a module.
Files Modified:

M       ocn_diag/eco_lib/nutlim_maps.py
M       ocn_diag/eco_lib/var_list.txt
M       ocn_diag/eco_lib/var_list_150m.txt
M       ocn_diag/eco_lib/ecosys_vars.txt
M       ocn_diag/eco_lib/clim_maps_surface_2D.py

================================================================================

Tag_name: /tools/proc_ocn/pop_diag/branches/popdiag_cesm_postprocessing/
Originator(s): aliceb
Date: 19 Aug 2015
One-line Summary: add timeseries_obs files to save time with the timeseries generated
averages using the pyAverager
Files Modified:

A       timeseries_obs
A       timeseries_obs/Arc_hor_mean_obs.nc
A       timeseries_obs/Sou_hor_mean_obs.nc
A       timeseries_obs/obs.nc
A       timeseries_obs/Ind_hor_mean_obs.nc
A       timeseries_obs/SALT_obs.nc
A       timeseries_obs/Gin_hor_mean_obs.nc
A       timeseries_obs/Lab_hor_mean_obs.nc
A       timeseries_obs/Atl_hor_mean_obs.nc
A       timeseries_obs/Hud_hor_mean_obs.nc
A       timeseries_obs/Glo_hor_mean_obs.nc
A       timeseries_obs/Pac_hor_mean_obs.nc

===============================================================

Tag_name: /tools/proc_ocn/pop_diag/branches/popdiag_cesm_postprocessing/
Originator(s): aliceb
Date: 10 Jun 2015
One-line Summary: added debug print msg
Files Modified:
M       ncl_lib/regionalSbias500m.ncl

===============================================================
Tag_name: /tools/proc_ocn/pop_diag/branches/popdiag_cesm_postprocessing/
Originator(s): aliceb
Date: 09 Mar 2015
One-line Summary: popdiag files required by the CESM postprocessing wrapper scripts
Files Modified:
A       ncl_lib
A       ncl_lib/compute_rho_cntl.ncl
A       ncl_lib/mld.ncl
A       ncl_lib/get_slabavg.ncl
A       ncl_lib/kappa_isopz.ncl
A       ncl_lib/T_eq_diff.ncl
A       ncl_lib/curl_pop.ncl
A       ncl_lib/sst_eq_pac_seasonal_cycle.ncl
A       ncl_lib/regionalTbias500m.ncl
A       ncl_lib/sfcflx.ncl
A       ncl_lib/pop_log_diagts_transports.ncl
A       ncl_lib/field_2d_za_diff.ncl
A       ncl_lib/saltz.ncl
A       ncl_lib/moc_netcdf.ncl
A       ncl_lib/mld_diff.ncl
A       ncl_lib/vecvelz.ncl
A       ncl_lib/pop_log_diagts_fwflux.monthly.ncl
A       ncl_lib/TS_profiles_diff_plot.ncl
A       ncl_lib/compute_rho.ncl
A       ncl_lib/TS_basinavg_arctic.ncl
A       ncl_lib/PD_eq_meridional.ncl
A       ncl_lib/U_eq_meridional.ncl
A       ncl_lib/wvelz_diff.ncl
A       ncl_lib/field_2d_diff.ncl
A       ncl_lib/field_2d_za.ncl
A       ncl_lib/field_3d_za.ncl
A       ncl_lib/uvelz.ncl
A       ncl_lib/moc_annual_timeseries.ncl
A       ncl_lib/vvelz.ncl
A       ncl_lib/wvelz.ncl
A       ncl_lib/pressure.ncl
A       ncl_lib/tempz_arctic.ncl
A       ncl_lib/U_eq_meridional_diff.ncl
A       ncl_lib/moc_netcdf_diff.ncl
A       ncl_lib/U_eq.ncl
A       ncl_lib/cpl6_log_timeseries_fw.ncl
A       ncl_lib/pop_log_diagts_cfc.monthly.ncl
A       ncl_lib/regionalTbias2000m.ncl
A       ncl_lib/test.ncl
A       ncl_lib/wisopz_diff.ncl
A       ncl_lib/T_eq_meridional_diff.ncl
A       ncl_lib/colormaps
A       ncl_lib/colormaps/table42.rgb
A       ncl_lib/kappa_thicz_diff.ncl
A       ncl_lib/eos.ncl
A       ncl_lib/T_eq.ncl
A       ncl_lib/yz_plot.ncl
A       ncl_lib/get_environment.ncl
A       ncl_lib/sfcflx_za_diff.ncl
A       ncl_lib/pop_log_diagts_precf.ncl
A       ncl_lib/S_eq_diff.ncl
A       ncl_lib/sfcflx_za.ncl
A       ncl_lib/U_eq_diff.ncl
A       ncl_lib/S_eq_meridional_diff.ncl
A       ncl_lib/regionalSbias500m.ncl
A       ncl_lib/S_eq.ncl
A       ncl_lib/pop_log_diagts_3d_ecosys.monthly_old.ncl
A       ncl_lib/pop_log_diagts_3d_ecosys.monthly.ncl
A       ncl_lib/vvelz_diff.ncl
A       ncl_lib/field_2d.ncl
A       ncl_lib/kappa_isopz_diff.ncl
A       ncl_lib/dwbc.ncl
A       ncl_lib/pop_eq_avg.ncl
A       ncl_lib/enso_wavelet_asc.ncl
A       ncl_lib/visopz_diff.ncl
A       ncl_lib/PD_eq_meridional_diff.ncl
A       ncl_lib/saltz_antarctic.ncl
A       ncl_lib/uisopz.ncl
A       ncl_lib/pop_log_diagts_hflux.monthly.ncl
A       ncl_lib/yt_plot.ncl
A       ncl_lib/S_eq_meridional.ncl
A       ncl_lib/field_3d_za_diff.ncl
A       ncl_lib/cpl7b_log_timeseries_fw.ncl
A       ncl_lib/kappa_thicz.ncl
A       ncl_lib/cpl6_log_timeseries_heat.ncl
A       ncl_lib/regionalSbias2000m.ncl
A       ncl_lib/sst_eq_pac_seasonal_cycle_diff.ncl
A       ncl_lib/sfcflx_diff.ncl
A       ncl_lib/saltz_arctic.ncl
A       ncl_lib/saltz_diff.ncl
A       ncl_lib/contour_plot.ncl
A       ncl_lib/iagez_diff.ncl
A       ncl_lib/tempz_diff.ncl
A       ncl_lib/visopz.ncl
A       ncl_lib/enso_wavelet.ncl
A       ncl_lib/iagez.ncl
A       ncl_lib/tempz.ncl
A       ncl_lib/cpl7b_log_timeseries_heat.ncl
A       ncl_lib/footer_text.ncl
A       ncl_lib/pop_log_diagts_nino.monthly.ncl
A       ncl_lib/fixed_env.ncl
A       ncl_lib/pop_log_diagts_3d.monthly.ncl
A       ncl_lib/uisopz_diff.ncl
A       ncl_lib/moc_monthly_timeseries.ncl
A       ncl_lib/tempz_antarctic.ncl
A       ncl_lib/wisopz.ncl
A       ncl_lib/T_eq_meridional.ncl
A       ncl_lib/get_environment_diff.ncl
A       ncl_lib/ssh.ncl
A       ncl_lib/uvelz_diff.ncl
A       ncl_lib/pop_lon_shift.ncl
A       tool_lib
A       tool_lib/gen_globavgTS_netcdf.csh
A       tool_lib/process_cpl6_logfiles_heat.old.awk
A       tool_lib/removefooter.csh
A       tool_lib/transports2cdf_v0.1.pl
A       tool_lib/process_pop2_logfiles.heat.awk
A       tool_lib/process_cpl7b_logfiles_fw.awk
A       tool_lib/process_cpl6_logfiles_heat.awk
A       tool_lib/gen_mavg_annmean_orig.csh
A       tool_lib/gen_mavg_netcdf.csh
A       tool_lib/gen_html_multivarz.csh
A       tool_lib/check_hpss.csh
A       tool_lib/mssuntar.csh
A       tool_lib/gen_pop_annual_timeseries.csh
A       tool_lib/gen_mavg_annmean.csh
A       tool_lib/gen_html_multivarz_eco_mod-obs.csh
A       tool_lib/nc_time_detrend.csh
A       tool_lib/gen_TS_meandiffrms_timeseries.csh
A       tool_lib/gen_pop_annmean.csh
A       tool_lib/log2cdf.LOG
A       tool_lib/log2cdf_v0.3.pl
A       tool_lib/process_cpl6_logfiles_fw.awk
A       tool_lib/process_cpl7_logfiles_fw.awk
A       tool_lib/get_monthly_files.README
A       tool_lib/process_pop2_dtfiles.awk
A       tool_lib/process_cpl7b_logfiles_heat.awk
A       tool_lib/nc_mon_to_ann.csh
A       tool_lib/gen_html_multivarz_eco_mod-mod.csh
A       tool_lib/transports2cdf.LOG
A       tool_lib/nc_mon_anom.csh
A       tool_lib/check_disk.csh
A       tool_lib/woce_cfc_plots.csh
A       tool_lib/process_pop2_logfiles.globaldiag.awk
A       tool_lib/process_cpl7_logfiles_heat.awk
A       tool_lib/process_pop2_logfiles.precfact.awk
A       tool_lib/gen_maxmoc_netcdf.csh
A       tool_lib/gen_poplog_ts_netcdfs.csh
A       tool_lib/rename.pl
A       tool_lib/get_monthly_files.csh
A       tool_lib/get_hpss.csh
A       tool_lib/gen_tavg_netcdf.csh
A       tool_lib/ps2gif
A       tool_lib/gen_globavgSHFnet.csh
A       tool_lib/woce_TS_plots.csh
A       tool_lib/process_pop2_logfiles.tseries.awk
A       tool_lib/zon_avg
A       tool_lib/zon_avg/main.F90
A       tool_lib/zon_avg/msg_mod.F90
A       tool_lib/zon_avg/nf_wrap.F90
A       tool_lib/zon_avg/POP_grid_mod.F90
A       tool_lib/zon_avg/arg_wrap.F90
A       tool_lib/zon_avg/kinds_mod.F90
A       tool_lib/zon_avg/makefile.ys
A       tool_lib/zon_avg/grids
A       tool_lib/zon_avg/grids/tx0.1v2_62lev_grid_info.nc
A       tool_lib/zon_avg/grids/tx0.1v2_grid_info.nc
A       tool_lib/zon_avg/grids/gx1v6_grid_info.nc
A       tool_lib/zon_avg/grids/gx3v7_grid_info.nc
A       tool_lib/zon_avg/main.F90.new
A       tool_lib/zon_avg/constants.F90
A       tool_lib/zon_avg/nf_wrap_stubs.F90
A       tool_lib/zon_avg/sphere_area_mod.F90
A       tool_lib/zon_avg/zonal_avg_mod.F90
A       tool_lib/zon_avg/makefile
A       tool_lib/za.ys
A       tool_lib/gen_pop_monthly_timeseries.csh
A       tool_lib/log2cdf.NOTES
A       tool_lib/addtowrapper.csh
A       tool_lib/gen_html_varz.csh
A       ChangeLog
A       eco_lib
A       eco_lib/zonal_avgs_2D.py
A       eco_lib/model_obs_maps_surface.py
A       eco_lib/regions_standard0_gx1v6.png
A       eco_lib/maps_surface_diff.py
A       eco_lib/get_variables.py
A       eco_lib/var_list.txt
A       eco_lib/res_vars_3D.py
A       eco_lib/var_list_150m.txt
A       eco_lib/maps_surface_diff_2D.py
A       eco_lib/res_at_depths_wFe.py
A       eco_lib/ecosys_vars.txt
A       eco_lib/extract_tseries.global.sh
A       eco_lib/run_tseries_scripts.sh
A       eco_lib/tseries_plots_combined.py
A       eco_lib/tseries_plots_combined_pfluxes.py
A       eco_lib/regions_bec_gx1v6.png
A       eco_lib/extract_tseries.region.sh
A       eco_lib/model_obs_maps_at_depths.py
A       eco_lib/extract_zavg_popdiag.sh
A       eco_lib/nutlim_maps.py
A       eco_lib/res_tseries_profiles.py
A       eco_lib/zonal_avgs_diff.py
A       eco_lib/vert_zonal_avgs_diff.py
A       eco_lib/clim_maps_at_depths.py
A       eco_lib/vert_zonal_avgs.py
A       eco_lib/zonal_avgs.py
A       eco_lib/o2_volume.py
A       eco_lib/clim_maps_surface.py
A       eco_lib/tseries_profiles.py
A       eco_lib/maps_at_depths_diff.py
A       eco_lib/res_surface_2D.py
A       eco_lib/res_mod_obs_0m.py
A       eco_lib/extract_tseries.o2min_vol.sh
A       eco_lib/clim_maps_surface_2D.py
A       eco_lib/ccsm_utils.py
A       eco_lib/mpl_utils.py
A       eco_lib/zonal_avgs_diff_2D.py
A       eco_lib/extract_zavg.sh
A       eco_lib/vert_zonal_avgs_mod-obs.py
A       eco_lib/res_tseries.py

===============================================================
Tag_name: popdiag_nclswift_release_20150108
Originator(s): aliceb
Date: 08 Jan 2015
One-line Summary: updates to plotting routines.
Files Modified:
A       swift_config/geyser
A       swift_config/geyser/fs.data
A       swift_config/geyser/cf.properties
A       swift_config/geyser/sites.xml
A       swift_config/geyser/tc.data
M       ChangeLog
M       popdiagdiff.csh
M       popdiag.csh
M       ncl_lib/sfcflx_za_diff.ncl
M       ncl_lib/mld.ncl
M       ncl_lib/mld_diff.ncl
M       ncl_lib/field_3d_za_diff.ncl
M       ncl_lib/field_2d_diff.ncl
M       ncl_lib/sfcflx_diff.ncl
M       tool_lib/za
M       tool_lib/gen_TS_meandiffrms_timeseries.csh
M       tool_lib/zon_avg/makefile
M       README.pdf
M       popdiagts.csh
M       swiftUtils/ts_meandiff_obs.csh

===============================================================

Originator: bates
Date: October 16, 2013
One-line Summary: new Swift mods, new data reading/writing capability, high
resolution capability, bugs fixed, new features, major cleanup 
Files Modified: popdiag.csh, popdiag.swift
		popdiagdiff.csh, popdiagdiff.swift
		popdiagts.csh, popdiagts.swift
		/tool_lib/gen_mavg_annmean.csh
		/tool_lib/gen_pop_annmean.csh
		/tool_lib/gen_pop_annual_timeseries.csh
		/tool_lib/gen_tavg_annmean.csh
		/tool_lib/gen_TS_meandiffrms_timeseries.csh
		/tool_lib/gen_pop_monthly_timeseries.csh
		/tool_lib/process_pop2_logfiles.globaldiag.awk
		/ncl_lib/cpl7b_log_timeseries_fw.ncl
		/ncl_lib/cpl7b_log_timeseries_heat.ncl
		/swiftUtils/za.csh
		/swift_config/geyser/tc.data
		/eco_lib/run_tseries_scripts.sh
		/ncl_lib/pop_log_diagts_fwflux.monthly.ncl
		/ncl_lib/pop_log_diagts_3d.monthly.ncl
		/ncl_lib/pop_log_diagts_cfc.monthly.ncl
		/ncl_lib/pop_log_diagts_hflux.monthly.ncl
		/ncl_lib/pop_log_diagts_nino.monthly.ncl
		/ncl_lib/pop_log_diagts_precf.ncl
		/ncl_lib/sfcflx.ncl
		/ncl_lib/sfcflx_za.ncl
		/ncl_lib/T_eq.ncl
		/ncl_lib/S_eq.ncl
		/ncl_lib/U_eq.ncl
		/ncl_lib/field_3d_za.ncl
		/ncl_lib/field_3d_za_diff.ncl
		/ncl_lib/cpl6_log_timeseries_heat.ncl
		/ncl_lib/cpl6_log_timeseries_fw.ncl
		/ncl_lib/get_environment.ncl
		/tool_lib/process_cpl7b_logfiles_fw.awk
		/tool_lib/process_cpl7_logfiles_fw.awk
		/tool_lib/process_cpl7_logfiles_heat.awk
		/tool_lib/zon_avg_POP_grid_mod.F90
		/tool_lib/zon_avg/main.F90
		/tool_lib/zon_avg/grids/tx0.1v2_grid_info.nc
		/tool_lib/zon_avg/grids/gx1v6_grid_info.nc
		/swiftUtils/proc_cpllog.csh
		/swiftUtils/ncrcat_wrap.csh
		/swiftUtils/ncl_wrapper_diff.csh
		/swiftUtils/add_rms.csh
		/swiftUtils/za.csh
		/swiftUtils/ncrcat_wrapper.csh
		/swiftUtils/ncl_wrapper.csh
		/swiftUtils/Append_ncks_za.csh
		/swiftUtils/hor_mean_diff.csh
		/swiftUtils/ncwa_wrap.csh
		/swiftUtils/ncdiff_wrap.csh
		/swiftUtils/ts_meandiff_obs.csh
Files Added: 	/tool_lib/check_disk.csh
		/tool_lib/check_hpss.csh
		/tool_lib/get_hpss.csh
		/tool_lib/get_monthly_files.csh
		/tool_lib/zon_avg/grids/tx0.1v2_42lev_grid_info.nc
		/swift_config/geyser/cf.properties
		/swift_config/geyser/fs.data
		/swift_config/geyser/sites.xml
		/swift_config/geyser/tc.data
	 
Description: 
1. Notes have been added to the three top level scripts for clarification.

2. All 'module load' commands were removed from the top level scripts. These do not work from within
the scripts and need to be loaded by the user before running scripts. A note at the top of the script 
now indicates this and lists the modules needed.

3. An environment variable called 'VERTICAL' that can be set by the user was added to the top level
scripts to accomodate having two different vertical levels for the high resolution data. It is only used 
if the levels are set as 42, and points to PHC obs data with 42 levels (rather than 60, which is the 
default).

4. All standard observation data (not including the ecosystem data) was collected into one directory, 
which can now be set as OBSROOTPATH in the top level scripts.

5. The scripts, check_disk.csh, check_hpss.csh, get_hpss.csh, and get_monthly_files.csh, were added to add the ability 
to have data either on HPSS or on a remote disk location (new environment variable called 'REMOTE_DISK'). 
These scripts also take care of many HPSS errors when reading data. The HPSS only allows for 5 file 
transfers at one time. If an error reading a file occurred, the user would have no knowledge and means 
could be created with missing data. These new scripts have checks for all of these errors and report them 
to the user.(N. Norton) The scripts that read data and create means were changed to use these scripts. This includes 
gen_mavg_annmean.csh, gen_pop_annmean.csh, gen_tavg_annmean.csh, gen_pop_annual_timeseries.csh,
gen_TS_meandiffrms_timeseries.csh and gen_pop_monthly_timeseries.csh. Edits were also made to all for cpl  and ocn log 
files and ocean .dt. files to be in a remote disk location.The scripts also only write data to the HPSS if the user 
sets CPL_TO_HSI = 1.

6. Swift Mods: 1) The popdiag.swift, popdiagdiff.swift, and popdiagts.swift were updated to the latest versions from S.
Mickelson and the calls within the top level scripts were changed accordingly. 2) Updates to scripts in swiftUtils were
also updated to match the latest version from S. Mickelson. 3) Files for geyser were added (/swift_config/geyser. The 
tc.data file was changed to the internal location of the code so that internal users do not have to modify this file. 
4) Edits were made to accomodate Swift in the top level scripts: SWIFT_DIR was added and points to Sheri
Mickelson's Swift executable which is the most up to date, and variables were added to the Swift call
following Sheri's most up to date code. 5) To accomodate the za tool being located in /tool_lib, the za.csh script 
was modified to read in $DIAGROOTPATH and locate the za tool in /tool_lib. The popdiag*.swift scripts were modified 
to pass $DIAGROOTPATH to za.csh.

7. The ecosystem script, run_tseries_scripts.sh was modified to look for any pop.h files, not just
monthly files.

8. The gen_tavg_annmean.csh script had a bug. It used $CASE rather than $CASENAME.

9. The most used scripts that manipulate the data (gen_mavg_annmean.csh, gen_pop_annmean.csh, gen_tavg_annmean.csh,
gen_pop_annual_timeseries.csh and gen_TS_meandiffrms_timeseries.csh) now only delete intermediate files if CLEANUP_FILES 
is set to 1 in the top level script. Setting to 1 is the default. This was not added to gen_pop_monthly_timeseries.csh.

10. The gen_TS_meandiffrms_timeseries.csh used to check for existing *hor_mean* files on the HPSS, only calculate 
needed years, concatenate the files, and re-write to the HPSS. This feature has been broken since the HPSS came 
online, and currenltly no solution has been found. With the current HPSS, a user does not have permission to delete or
replace files on the HPSS unless s/he is the owner. This is not true under many circumstances since many people run
the diagnostics package. This feature has been commented out of the script.

11. The ocn.log.* files start with 01-02-0001 if the coupling frequency is once per day (COUPLED_FREQ_OPT = nday and 
COUPLED_FREQ - 1), but it is 01-01-0001 when the coupling frequency is less than that (an hourly value). The
process_pop2_logfiles.globaldiag.awk now skips the 01-01-0001 value because the code is expecting the first value 
to be 01-02-0001. (N. Norton) 

12. Runoff timeseries are now included in both the heat and freshwater flux budget plots. This is only the case for CESM1.1
(or higher) output. The CPL option should be set to 7b. (cpl7b_log_timeseries_heat/fw.ncl).

13. Sometimes the first value written in the log files is zero for many fields (you can see this in the 
*.asc files that are written from the log file processing). To avoid a messy plot, the plotting code now
only reads the data starting on the second line of the *.asc files. The code affected includes: 
pop_log_diagts_fwflux.monthly.ncl, pop_log_diagts_3d.monthly.ncl, pop_log_diagts_cfc.monthly.ncl,
pop_log_diagts_hflux.monthly.ncl, pop_log_diagts_nino.monthly.ncl, and pop_log_diagts_precf.ncl.  

14. High Resolution Mods: 1) If the resolution tx0.1v2 is used, popdiag.csh will turn off the PM_VELISOPZ and PM_KAPPAZ 
plotting. (D. Bailey) 2) Observed fluxes for grids other than gx1v6 do not exist, so the sfcflx.ncl and sfcflx_za.ncl code has been hard-
coded so that if a grid other than gx1v6 is used, it won't make any of the flux plots. This includes the gx3v7 as well as the tx0.1v2 (D. Bailey)
Also, Forr_roff and Foxx_meltw are currently not in the gx1v6 flux data, so it also has been hard-coded not to plot.

15. The scripts *_eq.ncl which create a global longitude/depth plot along the equator was changed so that if a grid_file
is specified and exists, the code will use that file to get the longitude and latitude rather than using the tavg.yr0.yr1.nc
file. This was necessary because in the high resolution data, because of land block elimination, can give missing data
for lat/lon in the model output.

16. In some cases, the colorbar used for the zonal average plots (field_3d_za.ncl and field_3d_za_diff.ncl) did not
encompass the entire range of values. The code has been changed to check the max and min and set the colorbar
accordingly.

17. The freshwater and heat flux terms timeseries plots had 'CPL6' in the title. The code, cpl6_log_timeseries_heat/fw.ncl
has been changed so that it now prints 'CPL.'

18.Both grid_file and RESOLUTION were added to get_environment.ncl.

19. The freshwater budget table did not have the correct normalization for the 'OCN NET renormalized' term. This has been
fixed in the process_cpl7b_logfiles_fw.awk script. This was true for the process_cpl7_logfiles_fw/heat.awk also.

20. The zonal averaging tool was re-worked to be able to read KMT from a file if specified by the user. (K. Lindsay)

21. Grid files: The gx1v6_grid_info.nc was erroneously created with a modified topography file. This has been fixed. 
The tx0.1v2_grid_info.nc file is now for the 62 level ocean (it previously had the earlier 42 levels). A new file has
been added for the 42 level ocean grid (tx0.1v2_42lev_grid_info.nc). 

22. The option 'debug' can be turned on in the top level scripts. This option gives the user more printed statements 
helpful in debugging. (N. Norton)


_________________________________________________________________________________________________________________

Tag name: popdiag_eco_1.0.0
Originator(s): Ernesto Munoz
Date: July 18, 2013
One-line Summary: Add ecosystem and biogeochemistry modules to 
popdiag.csh, popdiagdiff.csh, popdiagts.csh


Purpose of changes: Add BEC modules to popdiag.csh, popdiagdiff, and popdiagts.


Bugs fixed: Accordingly


Describe any changes made to popdiag, popdiagdiff, or popdiagts:

Commond modifications to popdiag.csh, popdiagdiff.csh, and popdiagts.csh:
Added module loading of NCO, NCL, Python, and Python libraries.
Added path of eco/bgc scripts (ECOPATH) and eco/bgc datasets (ECODATADIR).
Added glossary of eco/bgc variable names.
Added automated e-mail message at completion of scripts.
So far, these versions of popdiag*.csh are not compatible with SWIFT.

Changes specific to popdiag.csh:
Added module options PM_E_MAPS, PM_E_VERT, PM_E_SEAS, and PM_E_O2.

Changes specific to popdiagdiff.csh:
Added module options PM_E_MAPS, PM_E_VERT, PM_E_SEAS.

Changes specific to popdiagts.csh: 
Added module options PM_E_GLOBL, PM_E_TMSR, PM_E_ZTMSR.


List any changes to the observational datasets:  None.


Code reviewed by:  myself (emunoz@ucar.edu)


List all subroutines eliminated:  None.


List all subroutines added:
R       html_lib/poplog_timeseries_ecosys.html
R       html_lib/ecosys_2d_surf.html

A       tool_lib/gen_html_multivarz_eco_mod-mod.csh
A       tool_lib/gen_mavg_annmean_orig.csh
A       tool_lib/gen_html_multivarz_eco_mod-obs.csh
A       tool_lib/zon_avg/main.F90.new

A       eco_lib
A       eco_lib/remap.so
A       eco_lib/ecosys_vars.txt
A       eco_lib/var_list.txt
A       eco_lib/var_list_150m.txt
A       eco_lib/regions_bec_gx1v6.png
A       eco_lib/regions_standard0_gx1v6.png
A       eco_lib/extract_zavg.sh
A       eco_lib/extract_zavg_popdiag.sh
A       eco_lib/run_tseries_scripts.sh
A       eco_lib/extract_tseries.global.sh
A       eco_lib/extract_tseries.region.sh
A       eco_lib/extract_tseries.o2min_vol.sh
A       eco_lib/ccsm_utils.py
A       eco_lib/mpl_utils.py
A       eco_lib/get_variables.py
A       eco_lib/res_at_depths_wFe.py
A       eco_lib/res_vars_3D.py
A       eco_lib/res_tseries_profiles.py
A       eco_lib/res_surface_2D.py
A       eco_lib/res_mod_obs_0m.py
A       eco_lib/res_tseries.py
A       eco_lib/clim_maps_surface.py
A       eco_lib/clim_maps_surface_2D.py
A       eco_lib/clim_maps_at_depths.py
A       eco_lib/model_obs_maps_surface.py
A       eco_lib/model_obs_maps_at_depths.py
A       eco_lib/nutlim_maps.py
A       eco_lib/zonal_avgs.py
A       eco_lib/zonal_avgs_2D.py
A       eco_lib/vert_zonal_avgs.py
A       eco_lib/vert_zonal_avgs_mod-obs.py
A       eco_lib/o2_volume.py
A       eco_lib/maps_surface_diff.py
A       eco_lib/maps_surface_diff_2D.py
A       eco_lib/maps_at_depths_diff.py
A       eco_lib/zonal_avgs_diff.py
A       eco_lib/zonal_avgs_diff_2D.py
A       eco_lib/vert_zonal_avgs_diff.py
A       eco_lib/tseries_profiles.py
A       eco_lib/tseries_plots_combined.py
A       eco_lib/tseries_plots_combined_pfluxes.py

A       ncl_lib/pop_log_diagts_3d_ecosys.monthly_old.ncl
A       ncl_lib/pop_log_diagts_3d_ecosys.monthly.ncl

A       html_lib/gen_ecosys_seasonal_diff.csh
A       html_lib/gen_ecosys_seasonal.csh
A       html_lib/ecosys_region_list_6
A       html_lib/ecosys_region_list_14
A       html_lib/ecosys_region_list_6_full
A       html_lib/ecosys_varname_list
A       html_lib/poplog_timeseries_ecosys_old.html
A       html_lib/ecosys_3d_za_diff.html
A       html_lib/ecosys_nutlim_maps.html
A       html_lib/ecosys_timeseries_profile.html
A       html_lib/ecosys_3d_za.html
A       html_lib/ecosys_glossary.html
A       html_lib/ecosys_o2_volume.html
A       html_lib/ecosys_mod-obs_surface.html
A       html_lib/ecosys_xsect_diff.html
A       html_lib/ecosys_xsect.html
A       html_lib/ecosys_maps_diff.html
A       html_lib/ecosys_maps.html
A       html_lib/ecosys_mod-mod_surface.html
A       html_lib/ecosys_timeseries_region.html


List all existing files that have been modified, and describe the changes:
M       popdiag.csh                   | Plot POP-BEC variables
M       popdiagdiff.csh               | Plot POP-BEC variables
M       popdiagts.csh                 | Plot POP-BEC variables
M       tool_lib/gen_mavg_annmean.csh | Create mavg with coordinate info
M       tool_lib/process_pop2_logfiles.globaldiag.awk | Extract BEC variables
M       tool_lib/zon_avg/makefile
M       tool_lib/zon_avg/main.F90

Summary of changes:
Added ecosystem and biogeochemistry modules to 
popdiag.csh, popdiagdiff.csh, popdiagts.csh.

___________________________________________________________________________________________

Originator: bates
Date: November 21, 2012
One-line Summary: NCL new version, scripts modified to use grid files for za tool, new runoff modifications,
new README
Files Modified: popdiag.csh, popdiagdiff.csh, popdiagts.csh, mld.ncl, mld_diff.ncl, README.pdf
Files Added: /tool_lib/process_cpl7b_logfiles_fw.awk
             /tool_lib/process_cpl7b_logfiles_heat.awk
	 
Description: 
1. Dave Brown created two new built-in functions in the new version of NCL (6.1.0). Because
of that, he modified mld.ncl and mld_diff.ncl to use them.

2. Runoff is now a module of it's own; therefore, the way the coupler files are written is different, and
the way the diagnostics processed these files had to change. Two new files (see above) are added and a new
option (7b) is listed in popdiag and popdiagdiff for CPL.

3. Because of recent updates, there is a new README file.

___________________________________________________________________________________________


Originator: bates
Date: September 3, 2012
One-line Summary: zonal average tool now uses grid files
Files Modified: popdiag.csh, popdiagdiff.csh
Files Added: /tool_lib/zon_avg/grids/gx1v6_grid_info.nc
             /tool_lib/zon_avg/grids/gx3v7_grid_info.nc
	     /tool_lib/zon_avg/grids/tx0.1v2_grid_info.nc
	 
Description: The zonal averaging tool broke for the tx0.1v2 version output because of land
block elimination creating undefined values where mask values used to be. To fix this, we
now invoke the -grid_file option of the za tool so that grid information is gathered from
a pre-made file rather than from the model output. The calls to the za tool within the
popdiag.csh and popdiagdiff.csh scripts have been modified accordingly.

___________________________________________________________________________________________

Originator: bates
Date: August 6, 2012
One-line Summary: Updated README for Swift/NCL version
Files Modified: README.pdf
_____________________________________________________________________________________________________

Originator: bates
Date: June 14, 2012
One-line Summary: This is the beginning of the NCL/SWIFT version of the diagnostics.
Code origination: The code is a direct copy of /tools/proc_ocn/pop_diag/branches/popdiag/release 
              which is equivalent to /tools/proc_ocn/pop_diag/branch_tags/popdiag_rel_20120117/.
	   
NCL modification:
All plotting scripts were converted to NCL by Dave Brown of CISL as part of the PARVIS project. Only 
changes to plotting scripts were done. The fer_lib and idl_lib are no longer necessary. All reference
to these directories or IDL settings (like IDLCOLOR) have been removed by S. Bates from the main 
diagnostics scripts. 

SWIFT modification:
SWIFT can now be used (if turned on) to parallelize the reading/writing/creation of data used by
the diagnostics scripts. This was done by Sheri Mickelson at Argonne Nat'l Lab as part of the PARVIS
project. A SWIFT README is now included (S. Mickelson) and the original README has been updated 
(S. Bates).
